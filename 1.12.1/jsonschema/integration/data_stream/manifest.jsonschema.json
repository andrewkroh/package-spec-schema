{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.elastic.dev/package-spec/1.12.1/integration/data_stream/manifest.jsonschema.json",
  "type": "object",
  "required": [
    "title"
  ],
  "properties": {
    "dataset": {
      "description": "Name of data set.",
      "type": "string"
    },
    "dataset_is_prefix": {
      "description": "if true, the index pattern in the ES template will contain the dataset as a prefix only",
      "default": false,
      "type": "boolean"
    },
    "elasticsearch": {
      "description": "Elasticsearch asset definitions",
      "type": "object",
      "properties": {
        "index_mode": {
          "description": "Index mode to use. Index mode can be used to enable use case specific functionalities.\nThis setting must be installed in the composable index template, not in the package component templates.",
          "examples": [
            "time_series"
          ],
          "type": "string",
          "enum": [
            "time_series"
          ]
        },
        "index_template": {
          "description": "Index template definition",
          "type": "object",
          "properties": {
            "ingest_pipeline": {
              "description": "Elasticsearch ingest pipeline settings",
              "type": "object",
              "required": [
                "name"
              ],
              "properties": {
                "name": {
                  "description": "Ingest pipeline name",
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "mappings": {
              "description": "Mappings section of index template",
              "type": "object"
            },
            "settings": {
              "description": "Settings section of index template",
              "type": "object"
            }
          },
          "additionalProperties": false
        },
        "privileges": {
          "description": "Elasticsearch privilege requirements",
          "type": "object",
          "properties": {
            "indices": {
              "description": "Elasticsearch index privilege requirements",
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "hidden": {
      "description": "Specifies if a data stream is hidden",
      "type": "boolean"
    },
    "ilm_policy": {
      "description": "The name of an existing ILM (Index Lifecycle Management) policy",
      "examples": [
        "diagnostics"
      ],
      "type": "string"
    },
    "release": {
      "description": "Stability of data stream.",
      "examples": [
        "beta"
      ],
      "type": "string",
      "enum": [
        "experimental",
        "beta"
      ]
    },
    "streams": {
      "description": "Streams offered by data stream.",
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "title",
          "description",
          "input"
        ],
        "properties": {
          "description": {
            "examples": [
              "Collect AWS billing metrics"
            ],
            "type": "string"
          },
          "enabled": {
            "description": "Is stream enabled?",
            "type": "boolean"
          },
          "input": {
            "examples": [
              "aws/metrics",
              "s3",
              "file"
            ],
            "type": "string"
          },
          "template_path": {
            "description": "Path to Elasticsearch index template for stream.",
            "type": "string"
          },
          "title": {
            "examples": [
              "AWS Billing metrics"
            ],
            "type": "string"
          },
          "vars": {
            "$ref": "#/definitions/vars"
          }
        },
        "additionalProperties": false
      }
    },
    "title": {
      "description": "Title of data stream.",
      "examples": [
        "AWS billing metrics"
      ],
      "type": "string"
    },
    "type": {
      "description": "Type of data stream",
      "examples": [
        "metrics"
      ],
      "type": "string",
      "enum": [
        "metrics",
        "logs",
        "synthetics",
        "traces"
      ]
    }
  },
  "additionalProperties": false,
  "definitions": {
    "input_variable_value": {
      "examples": [
        "null",
        "",
        "some string",
        1234,
        true,
        [
          3,
          "mixed",
          true
        ],
        [
          [
            "array",
            1
          ],
          [
            "array",
            2
          ]
        ]
      ],
      "anyOf": [
        {
          "type": [
            "string",
            "integer",
            "boolean",
            "null"
          ]
        },
        {
          "type": "array",
          "items": {
            "$ref": "#/definitions/input_variable_value"
          }
        }
      ]
    },
    "vars": {
      "description": "Input variables.",
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "name",
          "type"
        ],
        "properties": {
          "default": {
            "description": "Default value(s) for variable",
            "$ref": "#/definitions/input_variable_value"
          },
          "description": {
            "description": "Short description of variable.",
            "examples": [
              "Hosts of integration service to connect to"
            ],
            "type": "string"
          },
          "multi": {
            "description": "Can variable contain multiple values?",
            "examples": [
              true
            ],
            "default": false,
            "type": "boolean"
          },
          "name": {
            "description": "Variable name.",
            "examples": [
              "hosts"
            ],
            "type": "string"
          },
          "required": {
            "description": "Is variable required?",
            "examples": [
              true
            ],
            "default": false,
            "type": "boolean"
          },
          "show_user": {
            "description": "Should this variable be shown to the user by default?",
            "examples": [
              false
            ],
            "default": true,
            "type": "boolean"
          },
          "title": {
            "description": "Title of variable.",
            "examples": [
              "Hosts"
            ],
            "type": "string"
          },
          "type": {
            "description": "Data type of variable.",
            "examples": [
              "text"
            ],
            "type": "string",
            "enum": [
              "bool",
              "email",
              "integer",
              "password",
              "text",
              "time_zone",
              "url",
              "yaml"
            ]
          },
          "url_allowed_schemes": {
            "description": "List of allowed URL schemes for the url type. If empty, any scheme is allowed. An empty string can be used to indicate that the scheme is not mandatory.\n",
            "examples": [
              [
                "http",
                "https"
              ],
              [
                "redis",
                "rediss"
              ],
              [
                "",
                "mysql"
              ]
            ],
            "default": [],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "additionalProperties": false
      }
    }
  }
}
